webpackJsonp([108],{"5Ms1":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("gfkZ"),i=(window.BASEDOMAIN,{props:{visible:{type:Boolean,default:!0},peopleNums:{type:Number,default:1}},data:function(){return{fansDetail:{data:[],page:{}},current:1,memberName:"",multipleTable:[],dialogFans:this.visible}},methods:{getMembersData:function(){var e=this,t={};t.current=this.current,t.size=8,t.memberName=this.memberName,(a=t,l.a.post(window.BASEDOMAIN+"/app/member/getMemberList",a).then(function(e){return e.data})).then(function(t){100==t.code?e.fansDetail=t:e.$message.error(t.msg)}).catch(function(){e.$message({type:"info",message:"网络问题，请刷新重试~"})});var a},prizeSubmit:function(){0==this.multipleTable.length?this.$message.error("指定中奖人个数不能为0，请重新选择"):this.multipleTable.length>this.peopleNums?this.$message.error(" 指定中奖人个数不能超过"+this.peopleNums+"个，请重新选择"):(this.$emit("getFansData",this.multipleTable),this.dialogFans=!1)},handleSelectionChange:function(e){this.multipleTable=e},delPrize:function(e){this.multipleTable.splice(e,1)},handleCurrentChange:function(e){this.getMembersData()}},created:function(){this.getMembersData()},filters:{sexStatus:function(e){return 2==e?e="女":1==e?e="男":0==e&&(e="未知"),e}},watch:{visible:function(e,t){this.dialogFans=e,this.$refs.multipleTable&&this.$refs.multipleTable.clearSelection()},dialogFans:function(e,t){this.$emit("update:visible",e)}}}),s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("el-dialog",{attrs:{title:"粉丝列表",visible:e.dialogFans},on:{"update:visible":function(t){e.dialogFans=t}}},[a("div",{staticClass:"mb10"},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入昵称",icon:"search","on-icon-click":e.getMembersData},on:{blur:function(t){e.getMembersData(t)}},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.getMembersData(t)}},model:{value:e.memberName,callback:function(t){e.memberName=t},expression:"memberName"}})],1),e._v(" "),a("div",{staticClass:"dialogFansAll"},[a("div",{staticClass:"pull-left",staticStyle:{width:"75%"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.fansDetail.data,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{label:"头像",prop:"headimgurl"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.row.headimgurl}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"昵称",prop:"nickname"}}),e._v(" "),a("el-table-column",{attrs:{label:"性别",prop:"sex"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("sexStatus")(t.row.sex,t.row.sex)))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"所在城市",prop:"city"}}),e._v(" "),a("el-table-column",{attrs:{label:"关注时间",prop:"jointime"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("parseTime")(t.row.jointime,"{y}-{m}-{d}")))]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"组别",prop:"name"}})],1),e._v(" "),a("div",{staticClass:"public-page-fr"},[a("el-pagination",{attrs:{"current-page":e.current,"page-size":8,layout:"prev, pager, next, jumper",total:e.fansDetail.page.totalNums},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.current=t}}})],1),e._v(" "),a("div",{staticClass:"h20"})],1),e._v(" "),a("div",{staticClass:"pull-right dialogFans_r"},[a("div",{staticClass:"dialogFans_r_chose"},[e._v("\n                    已选择："+e._s(this.multipleTable.length)+"\n                ")]),e._v(" "),e._l(e.multipleTable,function(t,l){return a("div",{staticClass:"prizeItem"},[a("div",{staticStyle:{width:"100%"}},[a("div",{staticClass:"prizeName"},[e._v("\n                            "+e._s(t.nickname)+"\n                        ")]),e._v(" "),a("span",{staticClass:"blueee mr10 pull-right mt20",on:{click:function(t){e.delPrize(l)}}},[e._v("删除")])])])})],2),e._v(" "),a("div",{staticClass:"pull-right"},[a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"h20"}),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFans=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.prizeSubmit()}}},[e._v("确 定")])],1)])])])],1)},staticRenderFns:[]},n=a("VU/8")(i,s,!1,null,null,null);t.default=n.exports}});
webpackJsonp([46],{"LGO/":function(t,e){},O8jG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("0ToU"),s={data:function(){return{initCurrentPage:1,currentPage:1,initPageSize:10,pageSize:10,totalNums:0,snCode:"",status:-1,type:-1,tableData:[{address:"string",addressName:"string",cashTime:"1516341837149",id:0,memberId:0,memberName:"string",memberPhone:"string",nickname:"string",prizeName:"string",prizeUnit:0,receiveType:2,score:0,snCode:"string",status:2,type:1}],options:{type:[{label:"全部",value:-1},{label:"粉币",value:1},{label:"手机流量",value:2},{label:"手机话费",value:3},{label:"实体物品",value:4},{label:"谢谢参与",value:5},{label:"积分",value:6}],status:[{label:"全部",value:-1},{label:"未兑奖",value:1},{label:"已兑奖",value:2},{label:"已提交",value:3}]},DetailVisible:!1,DetailData:{}}},methods:{searchFuc:function(){this.currentPage=this.initCurrentPage,this.fetchData()},changeType:function(){this.fetchData()},changeStatus:function(){this.fetchData()},exportFuc:function(){var t={actId:this.$route.query.id,status:this.status,type:this.type,snCode:this.snCode};location.href=n.a.exportPrizeRecord(t)},sendPrize:function(t){var e=this;this.$confirm("确定要发送奖品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.sendWinning({id:t}).then(function(t){100==t.code?(e.$message.success("发送奖品成功"),e.fetchData()):e.$message.error("发送奖品失败")})})},detail:function(t){this.DetailData=t,this.DetailVisible=!0},delOne:function(t){var e=this;this.$confirm("确定要删除选中的核销员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={actId:e.$route.query.id,id:[t]};n.a.delWinning(a).then(function(t){100==t.code?(e.$message.success("删除成功"),e.currentPage=e.initCurrentPage,e.fetchData()):e.$message.error("删除失败")})})},delAll:function(){var t=this;if(this.multipleSelection.length<1)this.$message.info("请勾选需要删除的核销员");else{var e=[];this.$confirm("确定要删除选中的核销员?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.multipleSelection.forEach(function(t,a,n){e.push(t.id)},t);var a={actId:t.$route.query.id,id:e};n.a.delWinning(a).then(function(e){100==e.code?(t.$message.success("删除成功"),t.currentPage=t.initCurrentPage,t.fetchData()):t.$message.error("删除失败")})})}},handleCurrentChange:function(t){this.currentPage=t,this.fetchData()},fetchData:function(t){var e=this;this.initRequest=!!t;var a={actId:this.$route.query.id,current:this.currentPage,size:this.pageSize,snCode:this.snCode,status:this.status,type:this.type};n.a.getWinningList(a).then(function(t){100==t.code&&(e.tableData=t.data,e.totalNums=t.page.totalNums)})}},created:function(){this.fetchData(!0)},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("div",{staticClass:"hd-common turnPlate"},[a("el-breadcrumb",{staticClass:"gt-crumbs",attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("互动游戏")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:"/lanternFestival/index"}}},[t._v("元宵点灯")]),t._v(" "),a("el-breadcrumb-item",[t._v("中奖纪录")])],1),t._v(" "),a("div",{staticClass:"gt-gray-region mb20"},[a("span",{staticClass:"padding-left-md ml30 mb10"},[a("el-select",{attrs:{placeholder:"请选择奖品类型"},on:{change:t.changeType},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},t._l(t.options.type,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("span",{staticClass:"padding-left-md ml10 mb10"},[a("el-select",{attrs:{placeholder:"请选择状态"},on:{change:t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.options.status,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("span",{staticClass:"padding-left-md ml10 mb10"},[a("el-input",{staticStyle:{width:"250px"},attrs:{placeholder:"请输入兑奖码",icon:"search","on-icon-click":t.searchFuc,maxlength:25},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchFuc(e)}},model:{value:t.snCode,callback:function(e){t.snCode=e},expression:"snCode"}})],1),t._v(" "),a("div",{staticClass:"h10"}),t._v(" "),a("el-button",{staticClass:"ml30",attrs:{type:"primary"},on:{click:t.exportFuc}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"gt-content"},[t.initRequest&&t.tableData.length<1?a("gt-null-data",[t._v("还没有相关中奖纪录")]):a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"prizeName",label:"奖项名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"奖品类型"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                 "+t._s(t._f("prizeType")(e.row.type))+"  \r\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cashTime",label:"兑奖时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n                 "+t._s(t._f("DateFormat")(e.row.cashTime,"yyyy-MM-dd hh:mm:ss"))+"  \r\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n              "+t._s(t._f("prizeStatus")(e.row.status))+"\r\n            ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"snCode",label:"兑奖码"}}),t._v(" "),a("el-table-column",{attrs:{prop:"order_option",width:"260",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.statu?a("el-button",{staticClass:"gt-button-normal blue",on:{click:function(a){t.sendPrize(e.row.id)}}},[t._v("发放奖品")]):t._e(),t._v(" "),a("el-button",{staticClass:"gt-button-normal blue",on:{click:function(a){t.detail(e.row)}}},[t._v("详情")]),t._v(" "),a("el-button",{staticClass:"gt-button-normal",on:{click:function(a){t.delOne(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length,expression:"tableData.length"}],staticClass:"public-page-fr"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.totalNums},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}})],1),t._v(" "),a("el-dialog",{staticClass:"detail-dialog",attrs:{title:"详情",visible:t.DetailVisible},on:{"update:visible":function(e){t.DetailVisible=e}}},[a("gt-prize-detail",{attrs:{data:t.DetailData}})],1)],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(s,i,!1,function(t){a("LGO/")},null,null);e.default=l.exports}});